<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dashboard ‚Äî Ms. Silver Soul</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --primary:#0F62FE; --secondary:#0B6E4F; --accent:#FF6B6B;
      --bg:#F8FAFC; --text:#111827; --muted:#6B7280; --card:#FFFFFF;
      --focus: rgba(15,98,254,0.24);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:Inter, sans-serif;
      background:var(--bg);
      color:var(--text);
      padding:24px; display:flex; justify-content:center; min-height:100vh; align-items:flex-start;
    }
    .container{
      width:100%; max-width:1200px;
      margin:0 auto;
    }

    /* Header */
    header{
      display:flex;align-items:center;justify-content:space-between;
      margin-bottom:24px;
    }
    .logo{
      font-family:Poppins;font-size:22px;font-weight:700;
      color:var(--primary);
    }
    .header-actions{display:flex;gap:12px;align-items:center}
    .btn-logout{padding:8px 12px;border-radius:10px;border:1px solid #E6E9EE;background:white;cursor:pointer}

    /* Greeting */
    .greeting{
      background:linear-gradient(90deg, rgba(15,98,254,0.06), rgba(11,110,79,0.03));padding:18px 20px; border-radius:12px; display:flex; align-items:center; gap:16px; box-shadow:0 6px 18px rgba(12,18,30,0.06);
    }
    .greeting img{width:64px;height:64px;border-radius:50%;object-fit:cover; box-shadow:0 8px 20px rgba(15,98,254,0.12)}
    .greeting .text h2{font-size:20px;margin-bottom:4px}
    .greeting .text p{color:var(--muted);font-size:14px;margin:0}

    /* Main options (narrower cards, centered grid) */
    .grid{
      display:grid; grid-template-columns:repeat(2, minmax(280px,520px)); gap:22px; margin-top:28px; justify-content:center;
    }
    .option{
      background:var(--card); padding:22px 20px; border-radius:12px; box-shadow:0 8px 24px rgba(12,18,30,0.06);
      display:flex; flex-direction:column; align-items:flex-start; gap:10px; transition:transform .18s ease, box-shadow .18s ease;
      text-decoration:none; color:inherit; min-height:120px; position:relative;
    }
    .option:hover{transform:translateY(-6px); box-shadow:0 14px 36px rgba(15,98,254,0.12)}
    .option h3{margin:0;color:var(--primary);font-size:20px}

    /* CTA button below title */
    .cta{margin-top:8px; padding:10px 14px; background:var(--primary); color:white; border-radius:10px; font-weight:700; border:none; cursor:pointer; outline:none; box-shadow:0 8px 20px rgba(15,98,254,0.10); transition:transform 160ms ease, box-shadow 160ms ease, filter 160ms ease}
    .cta:hover{transform:translateY(-4px) scale(1.02); box-shadow:0 14px 36px rgba(15,98,254,0.18); filter:brightness(1.03)}
    .cta:focus{box-shadow:0 10px 30px var(--focus)}

    /* Modal / Logout popup */
    .modal-backdrop{position:fixed; inset:0; background:rgba(2,6,23,0.45); display:none; align-items:center; justify-content:center; z-index:60}
    .modal-backdrop.show{display:flex}
    .modal{background:var(--card); padding:20px; border-radius:12px; width:min(92%,560px); box-shadow:0 18px 48px rgba(12,18,30,0.28)}
    .modal h3{margin:0 0 8px;color:var(--primary)}
    .modal p{color:var(--muted);margin:0 0 10px}
    .modal .actions{display:flex; gap:10px; margin-top:14px}
    .btn-secondary{padding:8px 12px;border-radius:10px;border:1px solid #E6E9EE;background:white;cursor:pointer}
    .input{width:100%; min-height:44px; padding:10px 12px; border-radius:8px; border:1px solid #E6E9EE; background:var(--card); font-size:15px}

    /* footer */
    footer{margin-top:36px;text-align:center;font-size:13px;color:var(--muted)}

    @media (max-width:720px){
      .grid{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">Study Dashboard</div>
      <div class="header-actions">
        <button class="btn-logout" id="logoutBtn">Logout</button>
      </div>
    </header>

    <section class="greeting" aria-live="polite">
      <img src="Shona.jpg" alt="Ms. Silver Soul" />
      <div class="text">
        <h2 id="greeting">Good Day, Ms. Silver Soul</h2>
        <p id="greeting-sub">Welcome to your study control center.</p>
      </div>
    </section>

    <main class="grid" role="main">
      <!-- Subjects -->
      <div class="option" id="subjects" tabindex="0" aria-labelledby="sub-title">
        <h3 id="sub-title">üìò Subjects</h3>
        <button class="cta" data-href="subject.html">Open</button>
      </div>

      <!-- Timetable -->
      <div class="option" id="timetable" tabindex="0" aria-labelledby="time-title">
        <h3 id="time-title">üìÖ Timetable</h3>
        <button class="cta" data-href="timetable.html">Open</button>
      </div>
    </main>

    <footer>Made by @Your_AHOO‚ù§Ô∏è</footer>
  </div>

  <!-- Logout Modal -->
  <div class="modal-backdrop" id="logout-modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document">
      <h3>Confirm logout</h3>
      <p>Please type the phrase <strong>"I Love You Baby"</strong> (case-insensitive) to confirm logout.</p>
      <input id="logout-input" class="input" placeholder="Type the phrase here" aria-label="Logout confirmation input" />
      <div class="actions">
        <button class="btn-secondary" id="cancel-logout">Cancel</button>
        <button class="cta" id="logout-next">Next</button>
      </div>
    </div>
  </div>

  <!-- Confirmation overlay styled like subjects page -->
  <div class="modal-backdrop" id="confirm-overlay" role="dialog" aria-modal="true" aria-hidden="true">
    <!-- matched the subject-page style: centered text and secondary-colored heading -->
    <div class="modal" style="text-align:center">
      <h3 style="margin:0 0 8px;color:var(--secondary);font-size:18px">I Love Too Shona‚ù§Ô∏è</h3>
      <p style="margin:0;color:var(--muted)">Logging out and returning to welcome page...</p>
    </div>
  </div>

  <script>
    // Protect against BFCache/back navigation: immediate check + pageshow handler
    (function(){
      function redirectToWelcome(){
        try{ sessionStorage.removeItem('logged'); }catch(e){}
        window.location.replace('./index.html');
      }

      try{
        if(!sessionStorage.getItem('logged')){
          window.location.replace('./index.html');
        }
      }catch(e){
        window.location.replace('./index.html');
      }

      window.addEventListener('pageshow', function(e){
        if(e.persisted || !sessionStorage.getItem('logged')){
          window.location.replace('./index.html');
        }
      });

      document.addEventListener('visibilitychange', function(){
        if(document.visibilityState === 'visible' && !sessionStorage.getItem('logged')){
          window.location.replace('./index.html');
        }
      });
    })();

    // Greeting based on local time
    function getGreeting(){
      const now = new Date();
      const hour = now.getHours();
      if(hour < 12) return {g: 'Good Morning, Ms. Silver Soul', sub: 'Ready for a focused study session?'};
      if(hour < 17) return {g: 'Good Afternoon, Ms. Silver Soul', sub: 'Keep the momentum going.'};
      return {g: 'Good Evening, Ms. Silver Soul', sub: 'Wrap up with a calm review.'};
    }
    const greet = getGreeting();
    document.getElementById('greeting').textContent = greet.g;
    document.getElementById('greeting-sub').textContent = greet.sub;

    // Direct navigation for Open buttons
    document.querySelectorAll('[data-href]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        window.location.href = btn.getAttribute('data-href');
      });
    });

    // Logout flow
    const logoutBtn = document.getElementById('logoutBtn');
    const logoutModal = document.getElementById('logout-modal');
    const logoutInput = document.getElementById('logout-input');
    const logoutNext = document.getElementById('logout-next');
    const cancelLogout = document.getElementById('cancel-logout');
    const confirmOverlay = document.getElementById('confirm-overlay');

    function openModal(el){ el.classList.add('show'); el.setAttribute('aria-hidden','false'); }
    function closeModal(el){ el.classList.remove('show'); el.setAttribute('aria-hidden','true'); }

    logoutBtn.addEventListener('click', ()=>{
      logoutInput.value = '';
      openModal(logoutModal);
      setTimeout(()=> logoutInput.focus(), 40);
    });

    cancelLogout.addEventListener('click', ()=> closeModal(logoutModal));

    logoutNext.addEventListener('click', ()=>{
      const val = (logoutInput.value || '').trim().toLowerCase();
      if(val === 'i love you baby'){
        closeModal(logoutModal);
        openModal(confirmOverlay);
        setTimeout(()=>{
          try{ sessionStorage.removeItem('logged'); }catch(e){}
          try{ localStorage.clear(); }catch(e){}
          window.location.replace('./index.html');
        }, 1200);
      } else {
        logoutInput.animate([
          { transform: 'translateX(0)' },
          { transform: 'translateX(-8px)' },
          { transform: 'translateX(8px)' },
          { transform: 'translateX(0)' }
        ], {duration:260, iterations:1});
        logoutInput.focus();
      }
    });

    logoutInput.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') logoutNext.click(); });

    document.addEventListener('keydown', (e)=>{
      if(e.key === 'Escape'){
        document.querySelectorAll('.modal-backdrop.show').forEach(m=> closeModal(m));
      }
    });

    // Make option divs keyboard-activatable
    document.querySelectorAll('.option').forEach(opt=>{
      opt.addEventListener('keydown', (e)=>{ if(e.key === 'Enter'){
        const btn = opt.querySelector('[data-href]'); if(btn) btn.click();
      }});
      opt.addEventListener('click', (e)=>{ if(e.target.tagName.toLowerCase() === 'button') return; const btn = opt.querySelector('[data-href]'); if(btn) btn.click(); });
    });
  </script>
</body>
</html>
